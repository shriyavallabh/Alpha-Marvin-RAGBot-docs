<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The AI Workspace for Turning Documents into Trusted Intelligence — JurisAgent for Legal Q&amp;A"><link href=https://shriyavallabh.github.io/Alpha-Marvin-RAGBot-docs/phase2-features/ rel=canonical><link href=../product-roadmap/ rel=prev><link href=../scope-document/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Phase 2 Features - Alpha Marvin</title><link rel=stylesheet href=../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=amber data-md-color-accent=amber> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#jurisagent-basic-feature-guide class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Alpha Marvin" class="md-header__button md-logo" aria-label="Alpha Marvin" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Alpha Marvin </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Phase 2 Features </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/shriyavallabh/Alpha-Marvin-RAGBot-docs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> shriyavallabh/Alpha-Marvin-RAGBot-docs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../product-roadmap/ class=md-tabs__link> Product </a> </li> <li class=md-tabs__item> <a href=../reference-architecture/ class=md-tabs__link> Architecture </a> </li> <li class=md-tabs__item> <a href=../admin-module/ class=md-tabs__link> Administration </a> </li> <li class=md-tabs__item> <a href=../executive-summary/ class=md-tabs__link> Investor </a> </li> <li class=md-tabs__item> <a href=../market-comparison/ class=md-tabs__link> Market </a> </li> <li class=md-tabs__item> <a href=../raci-matrix/ class=md-tabs__link> Operations </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Alpha Marvin" class="md-nav__button md-logo" aria-label="Alpha Marvin" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Alpha Marvin </label> <div class=md-nav__source> <a href=https://github.com/shriyavallabh/Alpha-Marvin-RAGBot-docs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> shriyavallabh/Alpha-Marvin-RAGBot-docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Product </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Product </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../product-roadmap/ class=md-nav__link> <span class=md-ellipsis> Product Roadmap </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Phase 2 Features </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Phase 2 Features </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-secure-document-upload-encrypted-storage class=md-nav__link> <span class=md-ellipsis> 1. Secure Document Upload &amp; Encrypted Storage </span> </a> <nav class=md-nav aria-label="1. Secure Document Upload & Encrypted Storage"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-natural-language-query-interface class=md-nav__link> <span class=md-ellipsis> 2. Natural Language Query Interface </span> </a> <nav class=md-nav aria-label="2. Natural Language Query Interface"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_1 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_1 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites_1 class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies_1 class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations_1 class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-citation-backed-answers class=md-nav__link> <span class=md-ellipsis> 3. Citation-Backed Answers </span> </a> <nav class=md-nav aria-label="3. Citation-Backed Answers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_2 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_2 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites_2 class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies_2 class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations_2 class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-hallucination-prevention-grounding-validation class=md-nav__link> <span class=md-ellipsis> 4. Hallucination Prevention &amp; Grounding Validation </span> </a> <nav class=md-nav aria-label="4. Hallucination Prevention & Grounding Validation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_3 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_3 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites_3 class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies_3 class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations_3 class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#5-clause-extraction-search class=md-nav__link> <span class=md-ellipsis> 5. Clause Extraction &amp; Search </span> </a> <nav class=md-nav aria-label="5. Clause Extraction & Search"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_4 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_4 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites_4 class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies_4 class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations_4 class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#6-admin-dashboard-document-insights class=md-nav__link> <span class=md-ellipsis> 6. Admin Dashboard &amp; Document Insights </span> </a> <nav class=md-nav aria-label="6. Admin Dashboard & Document Insights"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_5 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_5 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites_5 class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies_5 class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations_5 class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#7-conversation-history-query-archive class=md-nav__link> <span class=md-ellipsis> 7. Conversation History &amp; Query Archive </span> </a> <nav class=md-nav aria-label="7. Conversation History & Query Archive"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_6 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_6 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites_6 class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies_6 class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations_6 class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#8-source-verification class=md-nav__link> <span class=md-ellipsis> 8. Source Verification </span> </a> <nav class=md-nav aria-label="8. Source Verification"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_7 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_7 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites_7 class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies_7 class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations_7 class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#9-ocr-text-cleanup class=md-nav__link> <span class=md-ellipsis> 9. OCR Text Cleanup </span> </a> <nav class=md-nav aria-label="9. OCR Text Cleanup"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_8 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_8 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#key-details class=md-nav__link> <span class=md-ellipsis> Key Details </span> </a> </li> <li class=md-nav__item> <a href=#impact class=md-nav__link> <span class=md-ellipsis> Impact </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#10-auto-document-filtering class=md-nav__link> <span class=md-ellipsis> 10. Auto Document Filtering </span> </a> <nav class=md-nav aria-label="10. Auto Document Filtering"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_9 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_9 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#impact_1 class=md-nav__link> <span class=md-ellipsis> Impact </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#11-bluebook-citation-formatting class=md-nav__link> <span class=md-ellipsis> 11. Bluebook Citation Formatting </span> </a> <nav class=md-nav aria-label="11. Bluebook Citation Formatting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_10 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#12-analysis-playbooks class=md-nav__link> <span class=md-ellipsis> 12. Analysis Playbooks </span> </a> <nav class=md-nav aria-label="12. Analysis Playbooks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_11 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../scope-document/ class=md-nav__link> <span class=md-ellipsis> Beta Scope Document </span> </a> </li> <li class=md-nav__item> <a href=../use-cases/ class=md-nav__link> <span class=md-ellipsis> Use Cases </span> </a> </li> <li class=md-nav__item> <a href=../user-journey/ class=md-nav__link> <span class=md-ellipsis> User Journey </span> </a> </li> <li class=md-nav__item> <a href=../user-manual/ class=md-nav__link> <span class=md-ellipsis> User Manual </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../reference-architecture/ class=md-nav__link> <span class=md-ellipsis> Reference Architecture </span> </a> </li> <li class=md-nav__item> <a href=../deployment-architecture/ class=md-nav__link> <span class=md-ellipsis> SaaS Deployment </span> </a> </li> <li class=md-nav__item> <a href=../chunking-strategies/ class=md-nav__link> <span class=md-ellipsis> Chunking Strategies </span> </a> </li> <li class=md-nav__item> <a href=../api-spec/ class=md-nav__link> <span class=md-ellipsis> API Specification </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Administration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Administration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../admin-module/ class=md-nav__link> <span class=md-ellipsis> Admin Module </span> </a> </li> <li class=md-nav__item> <a href=../dashboards/ class=md-nav__link> <span class=md-ellipsis> Dashboards </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Investor </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Investor </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../executive-summary/ class=md-nav__link> <span class=md-ellipsis> Executive Summary </span> </a> </li> <li class=md-nav__item> <a href=../pitch-deck/ class=md-nav__link> <span class=md-ellipsis> Pitch Deck </span> </a> </li> <li class=md-nav__item> <a href=../business-model/ class=md-nav__link> <span class=md-ellipsis> Business Model </span> </a> </li> <li class=md-nav__item> <a href=../go-to-market/ class=md-nav__link> <span class=md-ellipsis> Go-to-Market Strategy </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Market </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Market </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../market-comparison/ class=md-nav__link> <span class=md-ellipsis> Market Comparison </span> </a> </li> <li class=md-nav__item> <a href=../feature-matrix/ class=md-nav__link> <span class=md-ellipsis> Feature Matrix </span> </a> </li> <li class=md-nav__item> <a href=../differentiator-analysis/ class=md-nav__link> <span class=md-ellipsis> Differentiator Analysis </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Operations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Operations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../raci-matrix/ class=md-nav__link> <span class=md-ellipsis> RACI Matrix </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-secure-document-upload-encrypted-storage class=md-nav__link> <span class=md-ellipsis> 1. Secure Document Upload &amp; Encrypted Storage </span> </a> <nav class=md-nav aria-label="1. Secure Document Upload & Encrypted Storage"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-natural-language-query-interface class=md-nav__link> <span class=md-ellipsis> 2. Natural Language Query Interface </span> </a> <nav class=md-nav aria-label="2. Natural Language Query Interface"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_1 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_1 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites_1 class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies_1 class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations_1 class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-citation-backed-answers class=md-nav__link> <span class=md-ellipsis> 3. Citation-Backed Answers </span> </a> <nav class=md-nav aria-label="3. Citation-Backed Answers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_2 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_2 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites_2 class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies_2 class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations_2 class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-hallucination-prevention-grounding-validation class=md-nav__link> <span class=md-ellipsis> 4. Hallucination Prevention &amp; Grounding Validation </span> </a> <nav class=md-nav aria-label="4. Hallucination Prevention & Grounding Validation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_3 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_3 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites_3 class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies_3 class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations_3 class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#5-clause-extraction-search class=md-nav__link> <span class=md-ellipsis> 5. Clause Extraction &amp; Search </span> </a> <nav class=md-nav aria-label="5. Clause Extraction & Search"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_4 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_4 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites_4 class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies_4 class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations_4 class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#6-admin-dashboard-document-insights class=md-nav__link> <span class=md-ellipsis> 6. Admin Dashboard &amp; Document Insights </span> </a> <nav class=md-nav aria-label="6. Admin Dashboard & Document Insights"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_5 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_5 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites_5 class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies_5 class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations_5 class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#7-conversation-history-query-archive class=md-nav__link> <span class=md-ellipsis> 7. Conversation History &amp; Query Archive </span> </a> <nav class=md-nav aria-label="7. Conversation History & Query Archive"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_6 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_6 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites_6 class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies_6 class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations_6 class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#8-source-verification class=md-nav__link> <span class=md-ellipsis> 8. Source Verification </span> </a> <nav class=md-nav aria-label="8. Source Verification"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_7 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_7 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites_7 class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#dependencies_7 class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#limitations_7 class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#9-ocr-text-cleanup class=md-nav__link> <span class=md-ellipsis> 9. OCR Text Cleanup </span> </a> <nav class=md-nav aria-label="9. OCR Text Cleanup"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_8 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_8 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#key-details class=md-nav__link> <span class=md-ellipsis> Key Details </span> </a> </li> <li class=md-nav__item> <a href=#impact class=md-nav__link> <span class=md-ellipsis> Impact </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#10-auto-document-filtering class=md-nav__link> <span class=md-ellipsis> 10. Auto Document Filtering </span> </a> <nav class=md-nav aria-label="10. Auto Document Filtering"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_9 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#process-flow_9 class=md-nav__link> <span class=md-ellipsis> Process Flow </span> </a> </li> <li class=md-nav__item> <a href=#impact_1 class=md-nav__link> <span class=md-ellipsis> Impact </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#11-bluebook-citation-formatting class=md-nav__link> <span class=md-ellipsis> 11. Bluebook Citation Formatting </span> </a> <nav class=md-nav aria-label="11. Bluebook Citation Formatting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_10 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#12-analysis-playbooks class=md-nav__link> <span class=md-ellipsis> 12. Analysis Playbooks </span> </a> <nav class=md-nav aria-label="12. Analysis Playbooks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-it-does_11 class=md-nav__link> <span class=md-ellipsis> What It Does </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=jurisagent-basic-feature-guide>JurisAgent Basic — Feature Guide<a class=headerlink href=#jurisagent-basic-feature-guide title="Permanent link">&para;</a></h1> <p><strong>Product:</strong> Alpha Marvin / JurisAgent <strong>Phase:</strong> Phase 2 — JurisAgent Basic <strong>Tagline:</strong> Grounded truth, simplified. <strong>Last Updated:</strong> February 15, 2026 <strong>Owner:</strong> Alpha Marvin Team</p> <p>This document describes each Phase 2 feature in business language: what it does, how it works, what it depends on, and what it cannot do.</p> <div class="admonition note"> <p class=admonition-title>At a Glance</p> <p>12 features — all built and operational. Document upload with 9-stage AI pipeline, natural language Q&amp;A, citation-backed answers, hallucination prevention with GREEN/YELLOW/RED confidence scoring, admin dashboard, conversation history, OCR text cleanup, auto document filtering, Bluebook citation formatting, and analysis playbooks (contract review, due diligence, regulatory analysis). Validated through 9 rounds of benchmark evaluation — 100% pass rate, 4.48/5 composite score.</p> </div> <hr> <h2 id=1-secure-document-upload-encrypted-storage>1. Secure Document Upload &amp; Encrypted Storage<a class=headerlink href=#1-secure-document-upload-encrypted-storage title="Permanent link">&para;</a></h2> <h3 id=what-it-does>What It Does<a class=headerlink href=#what-it-does title="Permanent link">&para;</a></h3> <p>Allows Admin users to upload legal PDF documents through a drag-and-drop interface. Documents are processed through a 9-stage AI pipeline that extracts text, understands structure, and makes the content searchable via natural language.</p> <h3 id=process-flow>Process Flow<a class=headerlink href=#process-flow title="Permanent link">&para;</a></h3> <div style="max-width:740px;margin:1.5rem auto;font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;"> <div style="background:#ffffff;border-radius:16px;padding:24px;border:1px solid #e8e8e8;"> <div style=text-align:center;font-weight:700;font-size:14px;color:#1a1a1a;margin-bottom:16px;>9-Stage AI Ingestion Pipeline</div> <div style=display:flex;align-items:center;justify-content:center;flex-wrap:wrap;gap:4px;> <div style="background:#E8726A;color:white;padding:6px 14px;border-radius:20px;font-size:11px;font-weight:600;white-space:nowrap;">1. Parse</div> <span style=color:#d1d5db;font-size:14px;>&#x2192;</span> <div style="background:#E8726A;color:white;padding:6px 14px;border-radius:20px;font-size:11px;font-weight:600;white-space:nowrap;">2. Dedup</div> <span style=color:#d1d5db;font-size:14px;>&#x2192;</span> <div style="background:#E8726A;color:white;padding:6px 14px;border-radius:20px;font-size:11px;font-weight:600;white-space:nowrap;">3. Chunk</div> <span style=color:#d1d5db;font-size:14px;>&#x2192;</span> <div style="background:#E8726A;color:white;padding:6px 14px;border-radius:20px;font-size:11px;font-weight:600;white-space:nowrap;">4. Enrich</div> <span style=color:#d1d5db;font-size:14px;>&#x2192;</span> <div style="background:#E8726A;color:white;padding:6px 14px;border-radius:20px;font-size:11px;font-weight:600;white-space:nowrap;">5. Extract</div> <span style=color:#d1d5db;font-size:14px;>&#x2192;</span> <div style="background:#E8726A;color:white;padding:6px 14px;border-radius:20px;font-size:11px;font-weight:600;white-space:nowrap;">6. Embed</div> <span style=color:#d1d5db;font-size:14px;>&#x2192;</span> <div style="background:#E8726A;color:white;padding:6px 14px;border-radius:20px;font-size:11px;font-weight:600;white-space:nowrap;">7. Vector Store</div> <span style=color:#d1d5db;font-size:14px;>&#x2192;</span> <div style="background:#E8726A;color:white;padding:6px 14px;border-radius:20px;font-size:11px;font-weight:600;white-space:nowrap;">8. Database</div> <span style=color:#d1d5db;font-size:14px;>&#x2192;</span> <div style="background:#E8726A;color:white;padding:6px 14px;border-radius:20px;font-size:11px;font-weight:600;white-space:nowrap;">9. Knowledge Graph</div> </div> <div style=text-align:center;margin-top:12px;font-size:12px;color:#6b7280;>~15 seconds per page for scanned PDFs &nbsp;|&nbsp; Text PDFs process in under 1 second per page</div> </div> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>Admin drags PDF onto upload zone
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>        │
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>        ▼
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>File uploaded to server (encrypted in transit via HTTPS)
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>        │
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>        ▼
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>Stage 1: PARSE
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>        │  PDF pages rendered as images
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>        │  Claude Vision extracts text (handles scanned docs,
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>        │  watermarks, tables)
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>        │  Fallback: PyMuPDF text extraction for text-based PDFs
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>        │
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>        ▼
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>Stage 2: DEDUPLICATE
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>        │  Check if document already exists in the system
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a>        │  Prevent duplicate processing
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>        │
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>        ▼
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>Stage 3: CHUNK
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a>        │  Split document into retrievable sections
<a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a>        │  Legal-aware splitting: detects Articles, Sections,
<a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a>        │  Clauses, Schedules, Definitions
<a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a>        │  Each chunk: 500-1500 characters with overlap
<a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a>        │
<a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a>        ▼
<a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a>Stage 4: ENRICH
<a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a>        │  Claude adds contextual summaries to each chunk
<a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a>        │  Improves retrieval accuracy by 67% (Anthropic method)
<a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a>        │
<a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a>        ▼
<a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a>Stage 5: EXTRACT
<a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a>        │  Claude identifies entities (parties, dates, amounts)
<a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a>        │  Identifies relationships (obligations, rights, conditions)
<a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a>        │
<a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a>        ▼
<a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a>Stage 6: EMBED
<a id=__codelineno-0-37 name=__codelineno-0-37 href=#__codelineno-0-37></a>        │  Voyage AI converts text to 1024-dimensional vectors
<a id=__codelineno-0-38 name=__codelineno-0-38 href=#__codelineno-0-38></a>        │  Enables semantic similarity search
<a id=__codelineno-0-39 name=__codelineno-0-39 href=#__codelineno-0-39></a>        │
<a id=__codelineno-0-40 name=__codelineno-0-40 href=#__codelineno-0-40></a>        ▼
<a id=__codelineno-0-41 name=__codelineno-0-41 href=#__codelineno-0-41></a>Stage 7: VECTOR STORE
<a id=__codelineno-0-42 name=__codelineno-0-42 href=#__codelineno-0-42></a>        │  Vectors stored in Qdrant with tenant isolation
<a id=__codelineno-0-43 name=__codelineno-0-43 href=#__codelineno-0-43></a>        │
<a id=__codelineno-0-44 name=__codelineno-0-44 href=#__codelineno-0-44></a>        ▼
<a id=__codelineno-0-45 name=__codelineno-0-45 href=#__codelineno-0-45></a>Stage 8: DATABASE
<a id=__codelineno-0-46 name=__codelineno-0-46 href=#__codelineno-0-46></a>        │  Metadata saved to PostgreSQL
<a id=__codelineno-0-47 name=__codelineno-0-47 href=#__codelineno-0-47></a>        │  (document name, page count, chunk count, timestamps)
<a id=__codelineno-0-48 name=__codelineno-0-48 href=#__codelineno-0-48></a>        │
<a id=__codelineno-0-49 name=__codelineno-0-49 href=#__codelineno-0-49></a>        ▼
<a id=__codelineno-0-50 name=__codelineno-0-50 href=#__codelineno-0-50></a>Stage 9: KNOWLEDGE GRAPH
<a id=__codelineno-0-51 name=__codelineno-0-51 href=#__codelineno-0-51></a>        │  Entities and relationships stored in Neo4j
<a id=__codelineno-0-52 name=__codelineno-0-52 href=#__codelineno-0-52></a>        │  Enables multi-hop reasoning across documents
<a id=__codelineno-0-53 name=__codelineno-0-53 href=#__codelineno-0-53></a>        │
<a id=__codelineno-0-54 name=__codelineno-0-54 href=#__codelineno-0-54></a>        ▼
<a id=__codelineno-0-55 name=__codelineno-0-55 href=#__codelineno-0-55></a>Document appears in sidebar — ready for queries
</code></pre></div> <h3 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h3> <ul> <li>User must have Admin role</li> <li>PDF file format (other formats not supported in Phase 2)</li> <li>Active internet connection (for Claude Vision and Voyage AI API calls)</li> </ul> <h3 id=dependencies>Dependencies<a class=headerlink href=#dependencies title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Dependency</th> <th>Purpose</th> <th>What Happens If Unavailable</th> </tr> </thead> <tbody> <tr> <td>Claude Vision API</td> <td>Text extraction from PDF pages</td> <td>Falls back to PyMuPDF text extraction (lower quality for scanned docs)</td> </tr> <tr> <td>Voyage AI API</td> <td>Embedding generation</td> <td>Falls back to local BAAI/bge-small model (384-dim, lower retrieval quality)</td> </tr> <tr> <td>Qdrant</td> <td>Vector storage</td> <td>Upload fails; user sees error</td> </tr> <tr> <td>PostgreSQL</td> <td>Metadata storage</td> <td>Upload fails; user sees error</td> </tr> <tr> <td>Neo4j</td> <td>Knowledge graph</td> <td>Graph stage skipped; document still queryable via vector search</td> </tr> </tbody> </table> <h3 id=limitations>Limitations<a class=headerlink href=#limitations title="Permanent link">&para;</a></h3> <ul> <li>PDF only (no Word, Excel, or image files)</li> <li>Maximum practical size: ~700 pages per document (very large scanned documents take hours)</li> <li>Scanned PDFs take significantly longer (~15 seconds per page for Vision OCR)</li> <li>No batch upload UI (one document at a time, though pipeline handles sequential uploads)</li> <li>No upload progress showing which of 9 stages is currently running</li> </ul> <hr> <h2 id=2-natural-language-query-interface>2. Natural Language Query Interface<a class=headerlink href=#2-natural-language-query-interface title="Permanent link">&para;</a></h2> <h3 id=what-it-does_1>What It Does<a class=headerlink href=#what-it-does_1 title="Permanent link">&para;</a></h3> <p>Allows any authenticated user to ask questions about uploaded legal documents in plain English. No query syntax, no keyword matching — just type a question the way you would ask a colleague.</p> <div style="max-width:740px;margin:1.5rem auto;font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;"> <div style="border-radius:16px;overflow:hidden;box-shadow:0 8px 32px rgba(0,0,0,0.08);border:1px solid #e8e8e8;"> <div style=background:#fafafa;padding:20px;> <!-- User message --> <div style=display:flex;justify-content:flex-end;margin-bottom:16px;> <div style="background:#E8726A;color:white;padding:10px 16px;border-radius:16px 16px 4px 16px;max-width:85%;font-size:13px;line-height:1.5;">What are the indemnification obligations in the TTG Agreement?</div> </div> <!-- AI response with avatar --> <div style=display:flex;gap:10px;align-items:flex-start;> <div style=width:28px;height:28px;border-radius:50%;background:#E8726A;flex-shrink:0;display:flex;align-items:center;justify-content:center;margin-top:2px;><span style=color:white;font-size:12px;font-weight:700;>=</span></div> <div style="background:#ffffff;padding:16px;border-radius:4px 16px 16px 16px;max-width:90%;font-size:13px;line-height:1.7;color:#1a1a1a;border:1px solid #f0f0f0;"> <div style=font-size:12px;color:#E8726A;font-weight:600;margin-bottom:8px;>JurisAgent</div> <strong>Indemnification Obligations — TTG Agreement</strong><br><br> <span style=display:inline-block;width:5px;height:5px;border-radius:50%;background:#E8726A;margin-right:6px;vertical-align:middle;></span> <strong>General Indemnification (§8.2):</strong> Each party shall indemnify and hold harmless the other from third-party claims arising from material breach of representations or warranties.<br> <span style=display:inline-block;width:5px;height:5px;border-radius:50%;background:#E8726A;margin-right:6px;vertical-align:middle;></span> <strong>IP Indemnification (§8.3):</strong> Service Provider shall defend against third-party IP infringement claims related to delivered work product.<br> <span style=display:inline-block;width:5px;height:5px;border-radius:50%;background:#E8726A;margin-right:6px;vertical-align:middle;></span> <strong>Liability Cap (§8.5):</strong> Capped at total fees paid in preceding 12-month period, except for gross negligence. <div style=margin-top:12px;display:flex;flex-wrap:wrap;gap:6px;> <div style="padding:5px 10px;background:#f8f8f8;border-radius:6px;font-size:11px;color:#6b7280;display:inline-flex;align-items:center;gap:4px;">&#9634; Source: Legal &gt; QAMAR 003092 &gt; §8.2, Page 5</div> <div style="padding:5px 10px;background:#f8f8f8;border-radius:6px;font-size:11px;color:#6b7280;display:inline-flex;align-items:center;gap:4px;">&#9634; Source: Legal &gt; QAMAR 003098 &gt; §8.3, Pages 4-5</div> </div> <div style=margin-top:10px;display:flex;align-items:center;gap:8px;> <span style=font-size:11px;color:#6b7280;>Confidence</span> <div style=flex:1;height:4px;background:#e5e7eb;border-radius:2px;overflow:hidden;max-width:120px;> <div style=width:92%;height:100%;background:#22c55e;border-radius:2px;></div> </div> <span style=font-size:11px;color:#22c55e;font-weight:600;>92%</span> </div> </div> </div> </div> </div> <p style=text-align:center;color:#6b7280;font-size:13px;margin-top:10px;font-style:italic;>Natural language Q&amp;A — source-cited answers with confidence scoring</p> </div> <h3 id=process-flow_1>Process Flow<a class=headerlink href=#process-flow_1 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>User types question in chat input
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>        │
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>        ▼
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>Query Classification
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>        │  System categorizes the question type:
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>        │  • Factual (&quot;What is the effective date?&quot;)
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>        │  • Analytical (&quot;What are the risks in this contract?&quot;)
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>        │  • Procedural (&quot;What steps are needed to terminate?&quot;)
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>        │  • Comparative (&quot;How does clause A differ from clause B?&quot;)
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>        │
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>        ▼
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>Query Enrichment
<a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a>        │  Claude expands legal terminology
<a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>        │  Example: &quot;non-compete&quot; → also searches for
<a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a>        │  &quot;restrictive covenant&quot;, &quot;competition restriction&quot;
<a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a>        │
<a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a>        ▼
<a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a>3-Channel Search (parallel)
<a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a>        │
<a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a>        ├─► Vector Search (Qdrant)
<a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a>        │   Semantic similarity against all document chunks
<a id=__codelineno-1-22 name=__codelineno-1-22 href=#__codelineno-1-22></a>        │
<a id=__codelineno-1-23 name=__codelineno-1-23 href=#__codelineno-1-23></a>        ├─► Keyword Search (BM25)
<a id=__codelineno-1-24 name=__codelineno-1-24 href=#__codelineno-1-24></a>        │   Exact term matching for precise legal terms
<a id=__codelineno-1-25 name=__codelineno-1-25 href=#__codelineno-1-25></a>        │
<a id=__codelineno-1-26 name=__codelineno-1-26 href=#__codelineno-1-26></a>        └─► Graph Search (Neo4j)
<a id=__codelineno-1-27 name=__codelineno-1-27 href=#__codelineno-1-27></a>            Multi-hop traversal of entity relationships
<a id=__codelineno-1-28 name=__codelineno-1-28 href=#__codelineno-1-28></a>        │
<a id=__codelineno-1-29 name=__codelineno-1-29 href=#__codelineno-1-29></a>        ▼
<a id=__codelineno-1-30 name=__codelineno-1-30 href=#__codelineno-1-30></a>Result Fusion (RRF)
<a id=__codelineno-1-31 name=__codelineno-1-31 href=#__codelineno-1-31></a>        │  Reciprocal Rank Fusion merges results from
<a id=__codelineno-1-32 name=__codelineno-1-32 href=#__codelineno-1-32></a>        │  all 3 channels into a single ranked list
<a id=__codelineno-1-33 name=__codelineno-1-33 href=#__codelineno-1-33></a>        │
<a id=__codelineno-1-34 name=__codelineno-1-34 href=#__codelineno-1-34></a>        ▼
<a id=__codelineno-1-35 name=__codelineno-1-35 href=#__codelineno-1-35></a>Reranking (Cross-Encoder)
<a id=__codelineno-1-36 name=__codelineno-1-36 href=#__codelineno-1-36></a>        │  ms-marco-MiniLM-L-6-v2 re-scores results
<a id=__codelineno-1-37 name=__codelineno-1-37 href=#__codelineno-1-37></a>        │  for final relevance ordering
<a id=__codelineno-1-38 name=__codelineno-1-38 href=#__codelineno-1-38></a>        │
<a id=__codelineno-1-39 name=__codelineno-1-39 href=#__codelineno-1-39></a>        ▼
<a id=__codelineno-1-40 name=__codelineno-1-40 href=#__codelineno-1-40></a>Top chunks passed to Claude for answer generation
</code></pre></div> <h3 id=prerequisites_1>Prerequisites<a class=headerlink href=#prerequisites_1 title="Permanent link">&para;</a></h3> <ul> <li>At least one document must be uploaded and fully processed</li> <li>User must be authenticated (Admin or Member role)</li> </ul> <h3 id=dependencies_1>Dependencies<a class=headerlink href=#dependencies_1 title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Dependency</th> <th>Purpose</th> <th>What Happens If Unavailable</th> </tr> </thead> <tbody> <tr> <td>Qdrant</td> <td>Vector search</td> <td>Search fails; user sees error</td> </tr> <tr> <td>Neo4j</td> <td>Graph traversal</td> <td>Graph channel skipped; vector + keyword still work</td> </tr> <tr> <td>Claude API</td> <td>Query enrichment + answer generation</td> <td>Query fails; user sees error</td> </tr> </tbody> </table> <h3 id=limitations_1>Limitations<a class=headerlink href=#limitations_1 title="Permanent link">&para;</a></h3> <ul> <li>Questions must relate to uploaded documents — the system does not use outside knowledge</li> <li>Very broad questions ("tell me everything") produce lower-quality answers than specific ones</li> <li>Cross-document questions work but are limited by context window (~200K tokens)</li> <li>No support for non-English queries in Phase 2</li> </ul> <hr> <h2 id=3-citation-backed-answers>3. Citation-Backed Answers<a class=headerlink href=#3-citation-backed-answers title="Permanent link">&para;</a></h2> <h3 id=what-it-does_2>What It Does<a class=headerlink href=#what-it-does_2 title="Permanent link">&para;</a></h3> <p>Every answer includes traceable citations pointing to specific passages in the source documents. Users can verify any claim by clicking the citation to see the exact text.</p> <h3 id=process-flow_2>Process Flow<a class=headerlink href=#process-flow_2 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>Claude generates answer using retrieved chunks
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>        │
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>        ▼
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>Citations embedded inline as [Source N]
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>        │  Each [Source N] maps to a specific chunk
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>        │  from a specific document and page range
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>        │
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>        ▼
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a>Answer displayed with clickable citations
<a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a>        │
<a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a>        ▼
<a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a>User clicks [Source 1]
<a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a>        │
<a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a>        ▼
<a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a>Source Viewer panel opens
<a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a>        │  Shows: document name, page number(s),
<a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a>        │  exact text passage that supports the claim
<a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a>        │
<a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a>        ▼
<a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a>User verifies the citation is accurate
</code></pre></div> <h3 id=prerequisites_2>Prerequisites<a class=headerlink href=#prerequisites_2 title="Permanent link">&para;</a></h3> <ul> <li>A question must be asked and answered (citations are part of answers)</li> <li>Source chunks must exist in the vector store</li> </ul> <h3 id=dependencies_2>Dependencies<a class=headerlink href=#dependencies_2 title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Dependency</th> <th>Purpose</th> <th>What Happens If Unavailable</th> </tr> </thead> <tbody> <tr> <td>Claude API</td> <td>Generates citations inline with answer</td> <td>No answer = no citations</td> </tr> <tr> <td>PostgreSQL</td> <td>Stores chunk-to-document mapping</td> <td>Source viewer cannot look up original document</td> </tr> </tbody> </table> <h3 id=limitations_2>Limitations<a class=headerlink href=#limitations_2 title="Permanent link">&para;</a></h3> <ul> <li>Citations reference chunks, not exact page numbers (a chunk may span pages 4-5)</li> <li>Citation quality depends on chunking — if a clause was split across chunks, the citation may show only part of it</li> <li>No deep-link to a specific page in the original PDF (text-based source viewer only)</li> <li>Benchmark result: citation quality scored <strong>4.78/5</strong> in Round 9 LLM judge evaluation (improved from 2.95/5 through 9 rounds of iterative fixes)</li> </ul> <hr> <h2 id=4-hallucination-prevention-grounding-validation>4. Hallucination Prevention &amp; Grounding Validation<a class=headerlink href=#4-hallucination-prevention-grounding-validation title="Permanent link">&para;</a></h2> <h3 id=what-it-does_3>What It Does<a class=headerlink href=#what-it-does_3 title="Permanent link">&para;</a></h3> <p>Every answer is automatically checked against the source documents. The system assigns a confidence score and hallucination risk rating, displayed as a color-coded indicator so users know how much to trust each answer.</p> <div style="max-width:740px;margin:1.5rem auto;font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;"> <div style="background:#ffffff;border-radius:16px;padding:24px;border:1px solid #e8e8e8;"> <div style=text-align:center;font-weight:700;font-size:14px;color:#1a1a1a;margin-bottom:20px;>Confidence Scoring — Three Levels</div> <div style=display:flex;gap:16px;justify-content:center;flex-wrap:wrap;> <!-- GREEN --> <div style="flex:1;min-width:190px;max-width:220px;background:#fafafa;border-radius:12px;padding:16px;border:1px solid #e8e8e8;"> <div style=display:flex;align-items:center;gap:8px;margin-bottom:10px;> <span style=font-size:11px;color:#6b7280;>Confidence</span> <div style=flex:1;height:4px;background:#e5e7eb;border-radius:2px;overflow:hidden;> <div style=width:92%;height:100%;background:#22c55e;border-radius:2px;></div> </div> <span style=font-size:11px;color:#22c55e;font-weight:700;>92%</span> </div> <div style=font-size:13px;font-weight:600;color:#1a1a1a;margin-bottom:4px;>High Confidence</div> <div style=font-size:11px;color:#6b7280;line-height:1.5;>Answer is well-grounded in source documents. Low hallucination risk.</div> </div> <!-- YELLOW --> <div style="flex:1;min-width:190px;max-width:220px;background:#fafafa;border-radius:12px;padding:16px;border:1px solid #e8e8e8;"> <div style=display:flex;align-items:center;gap:8px;margin-bottom:10px;> <span style=font-size:11px;color:#6b7280;>Confidence</span> <div style=flex:1;height:4px;background:#e5e7eb;border-radius:2px;overflow:hidden;> <div style=width:50%;height:100%;background:#d97706;border-radius:2px;></div> </div> <span style=font-size:11px;color:#d97706;font-weight:700;>50%</span> </div> <div style=font-size:13px;font-weight:600;color:#1a1a1a;margin-bottom:4px;>Moderate — Verify Sources</div> <div style=font-size:11px;color:#6b7280;line-height:1.5;>Some claims may lack full support. Review cited sources carefully.</div> </div> <!-- RED --> <div style="flex:1;min-width:190px;max-width:220px;background:#fafafa;border-radius:12px;padding:16px;border:1px solid #e8e8e8;"> <div style=display:flex;align-items:center;gap:8px;margin-bottom:10px;> <span style=font-size:11px;color:#6b7280;>Confidence</span> <div style=flex:1;height:4px;background:#e5e7eb;border-radius:2px;overflow:hidden;> <div style=width:23%;height:100%;background:#dc2626;border-radius:2px;></div> </div> <span style=font-size:11px;color:#dc2626;font-weight:700;>23%</span> </div> <div style=font-size:13px;font-weight:600;color:#1a1a1a;margin-bottom:4px;>Low Confidence</div> <div style=font-size:11px;color:#6b7280;line-height:1.5;>Insufficient source support. Verify all claims independently.</div> </div> </div> </div> </div> <h3 id=process-flow_3>Process Flow<a class=headerlink href=#process-flow_3 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>Claude generates answer
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>        │
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>        ▼
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>Grounding Validation
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>        │  System checks: does every claim in the answer
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>        │  have support in the retrieved source chunks?
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>        │
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>        ▼
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>Confidence Score calculated (0.0 to 1.0)
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a>Hallucination Risk assessed (LOW / MEDIUM / HIGH)
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a>        │
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a>        ▼
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a>Classification (considers BOTH confidence + risk):
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a>        │
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a>        ├─► GREEN  (confidence &gt;= 0.75 + LOW risk)
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a>        │          (confidence &gt;= 0.80 + MEDIUM risk)
<a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a>        │   &quot;High Confidence&quot;
<a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a>        │
<a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a>        ├─► YELLOW (confidence &gt;= 0.50 + LOW/MEDIUM risk)
<a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a>        │          (confidence &gt;= 0.65 + HIGH risk)
<a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a>        │   &quot;Moderate — Verify Sources&quot;
<a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a>        │
<a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a>        └─► RED    (everything else)
<a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a>            &quot;Low Confidence — consult an attorney&quot;
<a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a>        │
<a id=__codelineno-3-26 name=__codelineno-3-26 href=#__codelineno-3-26></a>        ▼
<a id=__codelineno-3-27 name=__codelineno-3-27 href=#__codelineno-3-27></a>If HIGH risk detected:
<a id=__codelineno-3-28 name=__codelineno-3-28 href=#__codelineno-3-28></a>        │  Answer is automatically regenerated with
<a id=__codelineno-3-29 name=__codelineno-3-29 href=#__codelineno-3-29></a>        │  stricter prompt (up to 3 attempts)
<a id=__codelineno-3-30 name=__codelineno-3-30 href=#__codelineno-3-30></a>        │
<a id=__codelineno-3-31 name=__codelineno-3-31 href=#__codelineno-3-31></a>        ▼
<a id=__codelineno-3-32 name=__codelineno-3-32 href=#__codelineno-3-32></a>Displayed to user as color-coded badge:
<a id=__codelineno-3-33 name=__codelineno-3-33 href=#__codelineno-3-33></a>        │
<a id=__codelineno-3-34 name=__codelineno-3-34 href=#__codelineno-3-34></a>        │  [GREEN]  High Confidence
<a id=__codelineno-3-35 name=__codelineno-3-35 href=#__codelineno-3-35></a>        │  [YELLOW] Moderate — Verify Sources
<a id=__codelineno-3-36 name=__codelineno-3-36 href=#__codelineno-3-36></a>        │  [RED]    Low Confidence — Attorney Review Recommended
<a id=__codelineno-3-37 name=__codelineno-3-37 href=#__codelineno-3-37></a>        │
<a id=__codelineno-3-38 name=__codelineno-3-38 href=#__codelineno-3-38></a>        │  (Raw percentage is NOT shown to avoid
<a id=__codelineno-3-39 name=__codelineno-3-39 href=#__codelineno-3-39></a>        │   false precision for legal users)
</code></pre></div> <h3 id=prerequisites_3>Prerequisites<a class=headerlink href=#prerequisites_3 title="Permanent link">&para;</a></h3> <ul> <li>An answer must be generated (grounding is a post-generation step)</li> <li>Source chunks must be available for comparison</li> </ul> <h3 id=dependencies_3>Dependencies<a class=headerlink href=#dependencies_3 title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Dependency</th> <th>Purpose</th> <th>What Happens If Unavailable</th> </tr> </thead> <tbody> <tr> <td>Claude API</td> <td>Performs grounding check</td> <td>Grounding skipped; answer shown without confidence score</td> </tr> </tbody> </table> <h3 id=limitations_3>Limitations<a class=headerlink href=#limitations_3 title="Permanent link">&para;</a></h3> <ul> <li>Grounding checks add ~2-3 seconds to response time</li> <li>The confidence score is an estimate, not a guarantee — a GREEN answer can still contain subtle inaccuracies</li> <li>Grounding validates against retrieved chunks, not the full document — if the relevant passage was not retrieved, grounding cannot catch the gap</li> <li>Does not detect errors of omission (important information that should have been mentioned but was not)</li> </ul> <hr> <h2 id=5-clause-extraction-search>5. Clause Extraction &amp; Search<a class=headerlink href=#5-clause-extraction-search title="Permanent link">&para;</a></h2> <h3 id=what-it-does_4>What It Does<a class=headerlink href=#what-it-does_4 title="Permanent link">&para;</a></h3> <p>The system understands legal document structure. When documents are ingested, the chunking engine detects and preserves legal structural elements — Articles, Sections, Clauses, Schedules, Definitions. Users can search for specific clauses by name or content.</p> <h3 id=process-flow_4>Process Flow<a class=headerlink href=#process-flow_4 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>During document ingestion:
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>        │
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>        ▼
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>Legal Structure Detection
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>        │  Regex + heuristic patterns identify:
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>        │  • &quot;Article 1&quot;, &quot;Article II&quot;
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>        │  • &quot;Section 3.2&quot;, &quot;Section 3.2(a)&quot;
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>        │  • &quot;Clause 5&quot;, &quot;Sub-clause (i)&quot;
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>        │  • &quot;Schedule A&quot;, &quot;Exhibit B&quot;
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>        │  • &quot;Definitions&quot; sections
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>        │
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>        ▼
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a>Structure-Aware Chunking
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a>        │  Chunk boundaries align with legal structure
<a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a>        │  Section headings preserved as chunk metadata
<a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a>        │  Cross-references noted (&quot;see Section 4.2(a)&quot;)
<a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a>        │
<a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a>        ▼
<a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a>Metadata stored with each chunk:
<a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a>        │  • Document name
<a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a>        │  • Page numbers
<a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a>        │  • Section heading
<a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a>        │  • Chunk index
<a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a>        │
<a id=__codelineno-4-25 name=__codelineno-4-25 href=#__codelineno-4-25></a>        ▼
<a id=__codelineno-4-26 name=__codelineno-4-26 href=#__codelineno-4-26></a>During query:
<a id=__codelineno-4-27 name=__codelineno-4-27 href=#__codelineno-4-27></a>        │
<a id=__codelineno-4-28 name=__codelineno-4-28 href=#__codelineno-4-28></a>        ▼
<a id=__codelineno-4-29 name=__codelineno-4-29 href=#__codelineno-4-29></a>User asks: &quot;What does Section 5.1 say about termination?&quot;
<a id=__codelineno-4-30 name=__codelineno-4-30 href=#__codelineno-4-30></a>        │
<a id=__codelineno-4-31 name=__codelineno-4-31 href=#__codelineno-4-31></a>        ▼
<a id=__codelineno-4-32 name=__codelineno-4-32 href=#__codelineno-4-32></a>Search prioritizes chunks tagged with &quot;Section 5.1&quot;
<a id=__codelineno-4-33 name=__codelineno-4-33 href=#__codelineno-4-33></a>        │
<a id=__codelineno-4-34 name=__codelineno-4-34 href=#__codelineno-4-34></a>        ▼
<a id=__codelineno-4-35 name=__codelineno-4-35 href=#__codelineno-4-35></a>Answer references specific clauses with [Source N] links
</code></pre></div> <h3 id=prerequisites_4>Prerequisites<a class=headerlink href=#prerequisites_4 title="Permanent link">&para;</a></h3> <ul> <li>Documents must be in a structured format (contracts, regulations, policies)</li> <li>Ingestion pipeline must have completed successfully</li> </ul> <h3 id=dependencies_4>Dependencies<a class=headerlink href=#dependencies_4 title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Dependency</th> <th>Purpose</th> <th>What Happens If Unavailable</th> </tr> </thead> <tbody> <tr> <td>Chunking engine</td> <td>Structure detection</td> <td>Falls back to basic character-based splitting (lower precision)</td> </tr> <tr> <td>Qdrant</td> <td>Stores chunk metadata including section info</td> <td>Search works but cannot filter by section</td> </tr> </tbody> </table> <h3 id=limitations_4>Limitations<a class=headerlink href=#limitations_4 title="Permanent link">&para;</a></h3> <ul> <li>Works best with well-structured documents (numbered sections, clear headings)</li> <li>Unstructured documents (letters, memos, emails) may not have detectable clause structure</li> <li>Non-standard numbering schemes may not be detected (e.g., custom Roman numeral formats)</li> <li>Cannot reconstruct full document outline/table of contents from extracted structure</li> </ul> <hr> <h2 id=6-admin-dashboard-document-insights>6. Admin Dashboard &amp; Document Insights<a class=headerlink href=#6-admin-dashboard-document-insights title="Permanent link">&para;</a></h2> <h3 id=what-it-does_5>What It Does<a class=headerlink href=#what-it-does_5 title="Permanent link">&para;</a></h3> <p>Gives Admin users a high-level view of the workspace: how many documents are loaded, how many chunks and vectors exist, how many conversations have occurred, and how many users are in the system. Provides operational visibility without needing to dig into databases.</p> <h3 id=process-flow_5>Process Flow<a class=headerlink href=#process-flow_5 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>Admin navigates to /admin
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>        │
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>        ▼
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>System checks role (must be &quot;admin&quot;)
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>        │
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>        ├─► Non-admin: 403 Forbidden
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>        │
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>        └─► Admin: Dashboard loads
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>                │
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>                ▼
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>        5 stat cards displayed:
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>        ┌─────────────────────────────────────────────┐
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>        │                                             │
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>        │  [FileText]     [Layers]      [Database]    │
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a>        │  12 Documents   847 Chunks    847 Vectors   │
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>        │                                             │
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>        │  [MessageSquare]              [Users]       │
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a>        │  34 Conversations             3 Users       │
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a>        │                                             │
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a>        └─────────────────────────────────────────────┘
<a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a>                │
<a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a>                ▼
<a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a>        All counts scoped to current tenant
</code></pre></div> <h3 id=prerequisites_5>Prerequisites<a class=headerlink href=#prerequisites_5 title="Permanent link">&para;</a></h3> <ul> <li>Admin role required</li> <li>At least one document uploaded (otherwise all stats show 0)</li> </ul> <h3 id=dependencies_5>Dependencies<a class=headerlink href=#dependencies_5 title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Dependency</th> <th>Purpose</th> <th>What Happens If Unavailable</th> </tr> </thead> <tbody> <tr> <td>PostgreSQL</td> <td>Document, chunk, conversation, user counts</td> <td>Dashboard shows error</td> </tr> <tr> <td>Qdrant</td> <td>Vector count</td> <td>Vector stat shows error; other stats still work</td> </tr> </tbody> </table> <h3 id=limitations_5>Limitations<a class=headerlink href=#limitations_5 title="Permanent link">&para;</a></h3> <ul> <li>Read-only dashboard (no actions can be taken from this view yet)</li> <li>No historical trends (shows current state only, not changes over time)</li> <li>No invite management UI yet (invites must be created via API)</li> <li>No user management UI yet (cannot view/edit users from dashboard)</li> <li>See <a href=../dashboards/ >Dashboards</a> for detailed gap analysis</li> </ul> <hr> <h2 id=7-conversation-history-query-archive>7. Conversation History &amp; Query Archive<a class=headerlink href=#7-conversation-history-query-archive title="Permanent link">&para;</a></h2> <h3 id=what-it-does_6>What It Does<a class=headerlink href=#what-it-does_6 title="Permanent link">&para;</a></h3> <p>All questions and answers are saved automatically. Users can browse past conversations, revisit previous research sessions, and continue where they left off. Each conversation preserves the full thread of questions, answers, citations, and confidence scores.</p> <h3 id=process-flow_6>Process Flow<a class=headerlink href=#process-flow_6 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>User asks a question
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>        │
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>        ▼
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>System creates conversation (if new)
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>or appends to existing conversation
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>        │
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>        ▼
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>Question + answer + citations + grounding
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>all saved to PostgreSQL
<a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>        │
<a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a>        ▼
<a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a>Conversation appears in sidebar history
<a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a>        │
<a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a>        ▼
<a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a>Later: user clicks past conversation
<a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a>        │
<a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a>        ▼
<a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a>Full Q&amp;A thread restored
<a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a>        │  • All questions shown
<a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a>        │  • All answers with citations
<a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a>        │  • Confidence indicators preserved
<a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a>        │  • Source links still clickable
<a id=__codelineno-6-23 name=__codelineno-6-23 href=#__codelineno-6-23></a>        │
<a id=__codelineno-6-24 name=__codelineno-6-24 href=#__codelineno-6-24></a>        ▼
<a id=__codelineno-6-25 name=__codelineno-6-25 href=#__codelineno-6-25></a>User can continue asking follow-up questions
<a id=__codelineno-6-26 name=__codelineno-6-26 href=#__codelineno-6-26></a>in the same conversation context
</code></pre></div> <h3 id=prerequisites_6>Prerequisites<a class=headerlink href=#prerequisites_6 title="Permanent link">&para;</a></h3> <ul> <li>User must be authenticated</li> <li>At least one question must be asked to create a conversation</li> </ul> <h3 id=dependencies_6>Dependencies<a class=headerlink href=#dependencies_6 title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Dependency</th> <th>Purpose</th> <th>What Happens If Unavailable</th> </tr> </thead> <tbody> <tr> <td>PostgreSQL</td> <td>Stores conversation data</td> <td>History not saved; current session still works</td> </tr> </tbody> </table> <h3 id=limitations_6>Limitations<a class=headerlink href=#limitations_6 title="Permanent link">&para;</a></h3> <ul> <li>No search across past conversations (must scroll through list)</li> <li>No conversation export (PDF/DOCX) in Phase 2</li> <li>No conversation sharing between users</li> <li>No conversation deletion by users in Phase 2</li> <li>Conversations are scoped to the user who created them — other users cannot see them</li> </ul> <hr> <h2 id=8-source-verification>8. Source Verification<a class=headerlink href=#8-source-verification title="Permanent link">&para;</a></h2> <h3 id=what-it-does_7>What It Does<a class=headerlink href=#what-it-does_7 title="Permanent link">&para;</a></h3> <p>When an answer cites a source, users can click the citation to see the exact text passage from the original document. This closes the trust loop: the user does not have to take the AI's word for it — they can read the source themselves.</p> <h3 id=process-flow_7>Process Flow<a class=headerlink href=#process-flow_7 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>Answer displayed with [Source 1], [Source 2], etc.
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>        │
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>        ▼
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>User clicks [Source 1]
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>        │
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>        ▼
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>Source Viewer panel opens alongside answer
<a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>        │
<a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a>        ▼
<a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a>Panel shows:
<a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a>┌──────────────────────────────────────────┐
<a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a>│  SOURCE 1                                │
<a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a>│                                          │
<a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a>│  Document: NDA_AcmeCorp.pdf              │
<a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a>│  Pages: 4-5                              │
<a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a>│  Section: Article 3 — Confidentiality    │
<a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a>│                                          │
<a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a>│  &quot;The Receiving Party agrees to hold     │
<a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a>│  and maintain in strict confidence all   │
<a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a>│  Confidential Information disclosed by   │
<a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a>│  the Disclosing Party, and shall not,    │
<a id=__codelineno-7-22 name=__codelineno-7-22 href=#__codelineno-7-22></a>│  without the prior written consent of    │
<a id=__codelineno-7-23 name=__codelineno-7-23 href=#__codelineno-7-23></a>│  the Disclosing Party, disclose...&quot;      │
<a id=__codelineno-7-24 name=__codelineno-7-24 href=#__codelineno-7-24></a>│                                          │
<a id=__codelineno-7-25 name=__codelineno-7-25 href=#__codelineno-7-25></a>└──────────────────────────────────────────┘
<a id=__codelineno-7-26 name=__codelineno-7-26 href=#__codelineno-7-26></a>        │
<a id=__codelineno-7-27 name=__codelineno-7-27 href=#__codelineno-7-27></a>        ▼
<a id=__codelineno-7-28 name=__codelineno-7-28 href=#__codelineno-7-28></a>User reads original text and confirms
<a id=__codelineno-7-29 name=__codelineno-7-29 href=#__codelineno-7-29></a>the AI&#39;s interpretation is accurate
</code></pre></div> <h3 id=prerequisites_7>Prerequisites<a class=headerlink href=#prerequisites_7 title="Permanent link">&para;</a></h3> <ul> <li>An answer with citations must exist</li> <li>The cited chunk must still be in the vector store</li> </ul> <h3 id=dependencies_7>Dependencies<a class=headerlink href=#dependencies_7 title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Dependency</th> <th>Purpose</th> <th>What Happens If Unavailable</th> </tr> </thead> <tbody> <tr> <td>PostgreSQL</td> <td>Maps chunk ID to document and page info</td> <td>Source viewer shows error</td> </tr> <tr> <td>Qdrant</td> <td>Stores the actual chunk text</td> <td>Chunk text unavailable</td> </tr> </tbody> </table> <h3 id=limitations_7>Limitations<a class=headerlink href=#limitations_7 title="Permanent link">&para;</a></h3> <ul> <li>Shows extracted text, not the original PDF rendering (no images, formatting, or layout)</li> <li>Chunk text may be truncated if it spans a chunk boundary</li> <li>No ability to download or view the original PDF page</li> <li>Source viewer opens in a panel alongside the chat — not a full-page view</li> </ul> <hr> <hr> <h2 id=9-ocr-text-cleanup>9. OCR Text Cleanup<a class=headerlink href=#9-ocr-text-cleanup title="Permanent link">&para;</a></h2> <h3 id=what-it-does_8>What It Does<a class=headerlink href=#what-it-does_8 title="Permanent link">&para;</a></h3> <p>When scanned PDFs are processed through Vision OCR, the extracted text can contain artifacts — split words, hyphenation errors, garbled characters, and unicode issues. The OCR text cleanup pipeline automatically fixes these before the text is chunked and embedded, improving retrieval accuracy.</p> <h3 id=process-flow_8>Process Flow<a class=headerlink href=#process-flow_8 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>After PDF parsing (Stage 1), before deduplication (Stage 2):
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>        │
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>        ▼
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>Pass 1: DEHYPHENATION
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>        │  Rejoin words split by line-ending hyphens
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>        │  &quot;termi-\nnation&quot; → &quot;termination&quot;
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>        │
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>        ▼
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>Pass 2: SPLIT-WORD JOIN
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>        │  Sliding window (5→4→3→2 char fragments)
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a>        │  Joins if result is a dictionary word
<a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a>        │  &quot;li abilities&quot; → &quot;liabilities&quot;
<a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a>        │  &quot;termi nation&quot; → &quot;termination&quot;
<a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a>        │
<a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a>        ▼
<a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a>Pass 3: CHARACTER FIXES
<a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a>        │  Common OCR character substitutions
<a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a>        │  &quot;rn&quot; → &quot;m&quot;, &quot;cl&quot; → &quot;d&quot;, etc.
<a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a>        │
<a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a>        ▼
<a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a>Pass 4: UNICODE NORMALIZATION
<a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a>        │  Standardize smart quotes, dashes, whitespace
<a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a>        │
<a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a>        ▼
<a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a>Cleaned text proceeds to deduplication and chunking
</code></pre></div> <h3 id=key-details>Key Details<a class=headerlink href=#key-details title="Permanent link">&para;</a></h3> <ul> <li>Dictionary: NLTK words (~236K) + inflections (~700K total) + ~275 legal terms and Latin phrases</li> <li>Fragment threshold: 5+ characters (catches "ation", "ering", "trigg")</li> <li>Tiny non-standalone exception: 2-char fragments like "li" are not standalone words → allows joining "li abilities" → "liabilities"</li> <li>31 unit tests validate the cleaner</li> <li>Reclean script (<code>scripts/reclean_qdrant.py</code>) can re-process existing Qdrant chunks</li> </ul> <h3 id=impact>Impact<a class=headerlink href=#impact title="Permanent link">&para;</a></h3> <p>After running the OCR reclean on existing data, 2,101 of 5,369 chunks (39.1%) had improved text quality, which directly contributed to better retrieval accuracy in benchmark evaluations.</p> <hr> <h2 id=10-auto-document-filtering>10. Auto Document Filtering<a class=headerlink href=#10-auto-document-filtering title="Permanent link">&para;</a></h2> <h3 id=what-it-does_9>What It Does<a class=headerlink href=#what-it-does_9 title="Permanent link">&para;</a></h3> <p>When a user asks a question that references a specific document (e.g., "What are the termination clauses in the TTG Agreement?"), the system automatically detects this and scopes the search to that document only. This prevents cross-document contamination where facts from different documents get blended.</p> <h3 id=process-flow_9>Process Flow<a class=headerlink href=#process-flow_9 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>User asks: &quot;What are the liabilities in the ACE contract?&quot;
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>        │
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>        ▼
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>Regex Detection
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>        │  Pattern matches: &quot;in the ____ contract/agreement/document&quot;
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>        │  Detects: doc-specific query
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>        │
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>        ▼
<a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>LLM Document Reference Extraction
<a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>        │  Claude extracts the document reference: &quot;ACE contract&quot;
<a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a>        │
<a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a>        ▼
<a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a>Document Matching
<a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a>        │  Embedding search against document titles
<a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a>        │  + Title word-overlap scoring (70% title + 30% retrieval count)
<a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a>        │  Threshold: 0.3 minimum match score
<a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a>        │
<a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a>        ▼
<a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a>Scoped Search
<a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a>        │  All retrieval channels (Vector, Synonym, Graph)
<a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a>        │  are filtered to document_id of matched document
<a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a>        │
<a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a>        ▼
<a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a>Answer references only the specified document
</code></pre></div> <h3 id=impact_1>Impact<a class=headerlink href=#impact_1 title="Permanent link">&para;</a></h3> <p>Before auto document filtering, 2 of 50 benchmark questions failed due to cross-document contamination (mixing facts from Vol. I and Vol. II of depositions, or from different witness lists). After implementation, both passed.</p> <hr> <h2 id=11-bluebook-citation-formatting>11. Bluebook Citation Formatting<a class=headerlink href=#11-bluebook-citation-formatting title="Permanent link">&para;</a></h2> <h3 id=what-it-does_10>What It Does<a class=headerlink href=#what-it-does_10 title="Permanent link">&para;</a></h3> <p>Citations in answers are automatically formatted according to Bluebook style — the standard citation format used in legal practice. The system detects the document type (contract, case law, regulation, deposition) and applies the appropriate citation format.</p> <h3 id=example>Example<a class=headerlink href=#example title="Permanent link">&para;</a></h3> <p>Instead of: <code>[Source 1: QAMAR_003092.pdf, Page 5]</code> Produces: <code>[Source 1: QAMAR 003092, at 5]</code> (for legal documents)</p> <hr> <h2 id=12-analysis-playbooks>12. Analysis Playbooks<a class=headerlink href=#12-analysis-playbooks title="Permanent link">&para;</a></h2> <h3 id=what-it-does_11>What It Does<a class=headerlink href=#what-it-does_11 title="Permanent link">&para;</a></h3> <p>Reusable analysis frameworks that apply structured analytical approaches to uploaded documents. Three playbooks are available:</p> <table> <thead> <tr> <th>Playbook</th> <th>Purpose</th> <th>Key Outputs</th> </tr> </thead> <tbody> <tr> <td><strong>Contract Review</strong></td> <td>Systematic contract analysis</td> <td>Key terms, obligations, risks, missing clauses</td> </tr> <tr> <td><strong>Due Diligence</strong></td> <td>Data room document review</td> <td>Red flags, compliance gaps, entity relationships</td> </tr> <tr> <td><strong>Regulatory Analysis</strong></td> <td>Regulatory compliance check</td> <td>Applicable requirements, compliance status, gaps</td> </tr> </tbody> </table> <p>Playbooks extend the base Q&amp;A engine with domain-specific prompts and structured output templates.</p> <hr> <div class="admonition warning"> <p class=admonition-title>Data Scope: Unstructured Documents Only</p> <p>JurisAgent processes <strong>unstructured documents</strong> — PDFs (text + scanned), images, and text files. Structured database connectivity (SQL tables, APIs, data warehouses) is a separate capability planned for Phase 2+. CSV files are supported but processed as text extraction.</p> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "search.highlight", "content.code.copy"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>